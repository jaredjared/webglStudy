const req = require('./req')
let dir = module.exports = {}

dir.query = function () {
  return new Promise((resolve, reject) => {
    resolve()
  })
}

dir.create = (name, pathname) => {
  return new Promise((resolve, reject) => {
    let url = 'http://wizard2.webdev.com/cgi-bin/material/material_adddir'
    let data = {
      name: name,
      path: pathname + '/',
      url: 'http://wizard2.webdev.com/cgi-bin/material/material_list?dir=' + pathname + '/'
    }

    req.post(url, data)
    .then((res) => {
      let ret = {
        code: 0,
        msg: '执行成功',
        data: null
      }

      if (res.code === 0) {
        ret['msg'] = '创建目录成功'
        ret['data'] = {}
        ret['data']['name'] = name
      } else {
        ret['code'] = 202
        ret['msg'] = res.msg
      }

      resolve(ret)
    }, (err) => {
      reject(err)
    })
  })
}
